# 重构的重新认识

基本定义：重构是在不改变软件可观察行为的前提下改善其内部结构。

# 重构的生活方式

软件自有其美感所在。软件工程希望建立完美的需求与设计，按照既有的规范编写标准统一的代码，这是结构的美；快速迭代和RAD颠覆“全知全能”的神话，用近乎刀劈斧砍(crack)的方式解决问题，在混沌的循环往复中实现需求，这是解构的美；而Kent Beck与Martin Fowler两人站在一起，以XP那敏捷而又严谨的方法论演绎了重构的美。

# 序

“重构”这个概念来自Smalltalk圈子，没多久就进入了其他语言阵营之中。由于重构是框架开发中不可缺少的一部分，所以当框架开发人员讨论自己的工作时，这个属于就诞生了。当他们提炼自己的类继承体系时，但他们叫喊自己可以拿掉多少行代码时，它将随着设计者的经验成长而进化；他们也知道，代码被阅读和别修改的次数远远多于它被编写的次数，保持代码易读、易修改的关键，就是重构——对框架而言如此，对一般软件也如此。
好极了，还有什么问题吗？问题很显然：重构具有风险。它必须修改运作中的程序，这可能映入一些不易察觉的错误。如果重构方式不恰当，可能毁掉你数天甚至数星期的成果。如果重构时不做好准备，不遵守规则，风险就更大。你挖掘自己的代码，很快发现了一些值得修改的地方，于是你挖得更深。挖得愈深，找到的重构机会就越多，于是你的修改也愈多……最后你给自己挖了个大坑，却爬不出去了。为了避免自掘坟墓，重构必须系统化进行。我在《设计模式》书中和另外三位作者曾经提过：设计模式为重构提供了目标。然而“确定目标”只是问题的一部分而已，改造程序已达到目标，是另一个难题。


