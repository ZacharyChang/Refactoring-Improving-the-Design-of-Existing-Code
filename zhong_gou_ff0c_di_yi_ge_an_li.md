# 重构，第一个案例

## 1.1 起点
**如果你发现自己需要为程序添加一个特性，而代码结构使你无法很方便地达成目的，那就先重构那个程序，使特性的添加比较容易进行，然后再添加特性。**

## 1.2 重构的第一步
每当我要进行重构的时候，第一个步骤永远相同：我得为即将修改的代码建立一组可靠的测试环境。

你必须让测试有能力自我检验，否则就得耗费大把时间来回比对，这会降低你的开发速度。

进行重构的时候，我们需要依赖测试，让它告诉我们是否引入了bug。好的测试是重构的根本。花时间建立一个优良的测试机制是完全值得的，因为当你修改程序时，好测试会给你必要的安全保障。

**重构之前，首先检查自己是否有一套可靠的测试机制。这些测试必须有自我检验能力。**

## 1.3 分解并重组statement()
任何不会被修改的变量都可以被我当成参数传入新的函数，至于会被修改的变量就需格外心。如果只有一个变最会被修改，我可以把它当作返回值。

**重构技术就是以微小的步伐修改程序。如果你犯下错误，很容易便可发现它。**

更改变景名称是值得的行为吗？绝对值得。好的代码应该淸楚表达出自己的功能，变量名称是代码清晰的关键。如果为了提髙代码的清晰度，需要修改某些东西的名字，那么就大胆去做吧。

## 1.4 运用多态取代与价格相关的条件逻辑

## 1.5 结语

所有这些重构行为都使责任的分配更合理，代码的维护更轻松。重构后的程序风格，将迥异于过程化风格——后者也许是某些人习惯的风格。不过一旦你习惯了这种重构后的风格，就很难再满足于结构化风格了。

这个例子给我们最大的启发是重构的节奏：测试、小修改、测试、小修改、测试、小修改……正是这种节奏让重构得以快速而安全地前进。

